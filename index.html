<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Turbo Frog</title>
  </head>
  <body>
    <h1 id="title">Turbo Frog Terms of use and Privacy Policy</h1>

    <label for="language-select">Select Language:</label>
    <select id="language-select" onchange="changeLanguage()">
      <option value="en">English</option>
      <option value="es">Español</option>
      <!-- Add more languages here -->
    </select>
    <ul>
      <li>
        <a
          id="terms-link"
          href="https://netilon.github.io/turbo-frog/terms-of-use.en-us.html"
          >Terms of use</a
        >
      </li>
      <li>
        <a
          id="privacy-link"
          href="https://netilon.github.io/turbo-frog/privacy-policy.en-us.html"
          >Privacy Policy</a
        >
      </li>
    </ul>
  </body>
  <script>
    // Define translations
    const translations = {
      en: {
        localization: 'en-us',
        title: 'Turbo Frog Terms of use and Privacy Policy',
        terms: 'Terms of use',
        privacy: 'Privacy Policy',
      },
      es: {
        localization: 'es-ar',
        title: 'Términos de uso y Política de privacidad de Turbo Frog',
        terms: 'Términos de uso',
        privacy: 'Política de Privacidad',
      },
      // Add more languages here
    };

    // Function to get the value of a query parameter
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    // Function to translate the content based on the 'lang' query parameter
    function translateContent(lang) {
      const translation = translations[lang] || translations['en'];

      // Update content
      document.getElementById('title').textContent = translation.title;
      document.getElementById('terms-link').textContent = translation.terms;
      document.getElementById('privacy-link').textContent = translation.privacy;

      // Update hrefs
      document.getElementById(
        'terms-link'
      ).href = `https://netilon.github.io/turbo-frog/terms-of-use.${translation.localization}.html`;
      document.getElementById(
        'privacy-link'
      ).href = `https://netilon.github.io/turbo-frog/privacy-policy.${translation.localization}.html`;

      // Update the selected language in the dropdown
      document.getElementById('language-select').value = lang;
    }

    function getUserLanguage() {
      // Check if navigator.language is available and is a string
      if (
        typeof navigator.language === 'string' &&
        navigator.language.length > 0
      ) {
        // Split the language string and return the first part (e.g., 'en' from 'en-US')
        return navigator.language.split('-')[0];
      } else {
        // Fallback to a default language if navigator.language is unavailable or invalid
        return 'en';
      }
    }

    // Function to handle language change from the dropdown
    function changeLanguage() {
      const lang = document.getElementById('language-select').value;
      translateContent(lang);

      // Update the URL with the new language
      const newUrl = `${window.location.pathname}?lang=${lang}`;
      window.history.replaceState(null, '', newUrl);
    }

    window.onload = function () {
      const lang =
        getQueryParam('lang') || getUserLanguage() || 'en';
      translateContent(lang);
    };
  </script>
</html>
